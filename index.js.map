{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"https://pixabay.com/api/\";\n\n\nexport const fetchImgByQuery = (seaechQuery,currentPage) =>{\n    const paramsUrl=({\n        params:{\n            key:\"48264629-b593a4428d313ae96204c3007\",\n            q:seaechQuery,\n            image_type:'photo',\n            orientation:'horizontal',\n            safesearch:true,\n            per_page:15,\n            page:currentPage,\n        }\n    });\n\n\n\n    return axios.get(baseUrl,paramsUrl)\n};","import SimpleLightbox from \"simplelightbox\";\n\nexport const createGalleryCard = imgInfo =>{\n    return `\n        <li class ='card'>\n    <a class = 'gallery-link' href = '${imgInfo.largeImageURL}'>\n        <img \n            class = 'card__image'\n            src='${imgInfo.webformatURL}' \n            alt='${imgInfo.tags}'>\n\n            <div class = 'stats'>\n                <p class = 'stats-item'>Likes ${imgInfo.likes}</p>\n                <p class = 'stats-item'>Views ${imgInfo.views}</p>\n                <p class = 'stats-item'>Comments ${imgInfo.comments}</p>\n                <p class = 'stats-item'>Downloads ${imgInfo.downloads}</p>\n            </div>\n      \n<a/>\n    </li>\n    `\n};\n\nexport const createGalleryTemplate = function(elem){\n   return elem.hits.map(el=>createGalleryCard(el)).join('');\n}\n\nexport const addClass = function(elem, className){\n    return elem.classList.add(className)\n};\n\nexport const removeClass = function(elem, className){\n    return elem.classList.remove(className)\n};\n\nexport const simpleBox = function(){\n    return new SimpleLightbox('.gallery a');\n};\n\nexport const totalPages = function(elem){\n  return Math.ceil(elem.totalHits / 15)\n}","import { fetchImgByQuery } from \"./js/pixabay-api\";\nimport { createGalleryTemplate } from \"./js/render-functions\";\nimport { addClass } from \"./js/render-functions\";\nimport { removeClass } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport { simpleBox } from \"./js/render-functions\";\nimport { totalPages } from \"./js/render-functions\";\n\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\nconst notFound = document.querySelector('.not-found');\n\nlet page = 1;\nlet inputValue ='';\n\nconst searchSubmit = async e =>{\n    try {\n        e.preventDefault();\n        removeClass(loader,'visually-hidden');\n        addClass(notFound,'visually-hidden');\n        galleryEl.innerHTML = ''\n        inputValue = e.currentTarget.elements.input.value.trim();\n         \n          if ( inputValue === ''){\n             iziToast.error({\n                  title:'Error',\n                  message:'Please enter your search query'\n             })\n            addClass(loader,'visually-hidden');\n             \n             return;\n          };\n\n          page = 1\n\n          addClass(loadMoreBtn,'visually-hidden');\n\n          const {data} = await fetchImgByQuery(inputValue,page);\n          \n          if (data.total === 0) {\n                iziToast.error({\n                  title:'Error',\n                  message:'Please enter another search query'\n             });\n             addClass(loader,'visually-hidden')\n             removeClass(notFound,'visually-hidden');\n            galleryEl.innerHTML = '';\n            formEl.reset();\n            return;\n          }\n\n          if(totalPages(data) > 1){\n            removeClass(loadMoreBtn,'visually-hidden');\n            \n            loadMoreBtn.addEventListener('click', onLoadMoreBtnClick)\n          }\n           createGalleryTemplate(data);\n           addClass(loader,'visually-hidden');\n           galleryEl.innerHTML = createGalleryTemplate(data);\n           simpleBox();  \n\n    } catch (error) {\n        console.log(error);\n        \n}\n    \n};\n\nformEl.addEventListener('submit', searchSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n    try {\n      page++\n      const { data } = await fetchImgByQuery(inputValue,page);\n\n      createGalleryTemplate(data);\n  \n      galleryEl.insertAdjacentHTML('beforeend',  createGalleryTemplate(data));\n      simpleBox();\n  \n     scrollBy({\n      top:1100,\n      behavior: \"smooth\",\n    })\n      if (page === totalPages(data)) {\n       \n        addClass(loadMoreBtn,'visually-hidden');\n  \n        loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };"],"names":["baseUrl","fetchImgByQuery","seaechQuery","currentPage","paramsUrl","axios","createGalleryCard","imgInfo","createGalleryTemplate","elem","el","addClass","className","removeClass","simpleBox","SimpleLightbox","totalPages","formEl","galleryEl","loader","loadMoreBtn","notFound","page","inputValue","searchSubmit","e","iziToast","data","onLoadMoreBtnClick","error","event","err"],"mappings":"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"}