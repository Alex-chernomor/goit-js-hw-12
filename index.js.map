{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"https://pixabay.com/api/\";\n\n\nexport const fetchImgByQuery = (seaechQuery,currentPage) =>{\n    const paramsUrl=({\n        params:{\n            key:\"48264629-b593a4428d313ae96204c3007\",\n            q:seaechQuery,\n            image_type:'photo',\n            orientation:'horizontal',\n            safesearch:true,\n            per_page:15,\n            page:currentPage,\n        }\n    });\n\n\n\n    return axios.get(baseUrl,paramsUrl)\n};","import SimpleLightbox from \"simplelightbox\";\n\nexport const createGalleryCard = imgInfo =>{\n    return `\n        <li class ='card'>\n    <a class = 'gallery-link' href = '${imgInfo.largeImageURL}'>\n        <img \n            class = 'card__image'\n            src='${imgInfo.webformatURL}' \n            alt='${imgInfo.tags}'>\n\n            <div class = 'stats'>\n                <p class = 'stats-item'>Likes ${imgInfo.likes}</p>\n                <p class = 'stats-item'>Views ${imgInfo.views}</p>\n                <p class = 'stats-item'>Comments ${imgInfo.comments}</p>\n                <p class = 'stats-item'>Downloads ${imgInfo.downloads}</p>\n            </div>\n      \n<a/>\n    </li>\n    `\n};\n\nexport const createGalleryTemplate = function(elem){\n   return elem.hits.map(el=>createGalleryCard(el)).join('');\n}\n\nexport const addClass = function(elem, className){\n    return elem.classList.add(className)\n};\n\nexport const removeClass = function(elem, className){\n    return elem.classList.remove(className)\n};\n\nexport const simpleBox = function(){\n    return new SimpleLightbox('.gallery a');\n};\n\nexport const totalPages = function(elem){\n  return Math.ceil(elem.totalHits / 15)\n}\n\nexport const createLoader = function(){\n    return '<div class=\"js-load-more loader\"></div>'\n}","import { fetchImgByQuery } from \"./js/pixabay-api\";\nimport { createGalleryTemplate} from \"./js/render-functions\";\nimport { addClass } from \"./js/render-functions\";\nimport { removeClass } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport { simpleBox } from \"./js/render-functions\";\nimport { totalPages } from \"./js/render-functions\";\nimport { createLoader } from \"./js/render-functions\";\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\nconst notFound = document.querySelector('.not-found');\nconst loader = document.querySelector('.js-loader');\n\n\nlet page = 1;\nlet inputValue ='';\n\n\nsimpleBox();\n\nconst searchSubmit = async e =>{\n    try {\n        e.preventDefault();\n        removeClass(loader,'visually-hidden');\n        addClass(notFound,'visually-hidden');\n        galleryEl.innerHTML = ''\n        inputValue = e.currentTarget.elements.input.value.trim();\n         \n          if ( inputValue === ''){\n             iziToast.error({\n                  title:'Error',\n                  message:'Please enter your search query'\n             })\n            addClass(loader,'visually-hidden');\n             \n             return;\n          };\n\n          page = 1\n          \n          addClass(loadMoreBtn,'visually-hidden');\n          \n          const {data} = await fetchImgByQuery(inputValue,page);\n          \n          \n          if (data.total === 0) {\n                iziToast.error({\n                  title:'Error',\n                  message:'Please enter another search query'\n             });\n             addClass(loader,'visually-hidden')\n             removeClass(notFound,'visually-hidden');\n            galleryEl.innerHTML = '';\n            formEl.reset();\n            return;\n          }\n\n          if(totalPages(data) > 1){\n            removeClass(loadMoreBtn,'visually-hidden');\n            \n            loadMoreBtn.addEventListener('click', onLoadMoreBtnClick)\n          };\n          if (totalPages(data)===1) {\n            iziToast.info({\n              title:'Sorry',\n              message:`We're sorry, but you've reached the end of search results.`\n         });\n          }\n\n           createGalleryTemplate(data);\n           addClass(loader,'visually-hidden');\n           galleryEl.innerHTML = createGalleryTemplate(data);\n           simpleBox().refresh();\n\n    } catch (error) {\n        console.log(error);\n        \n}\n    \n};\n\nformEl.addEventListener('submit', searchSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  galleryEl.insertAdjacentHTML('beforeend',createLoader());\n  const ulLoader = document.querySelector('.js-load-more')\n    try {\n      page++\n      const { data } = await fetchImgByQuery(inputValue,page);\n\n      createGalleryTemplate(data);\n      ulLoader.remove();\n      galleryEl.insertAdjacentHTML('beforeend',  createGalleryTemplate(data));\n     \n  \n     scrollBy({\n      top:1100,\n      behavior: \"smooth\",\n    })\n      if (page === totalPages(data)) {\n        \n        addClass(loadMoreBtn,'visually-hidden');\n        console.log(\"s\");\n        \n        loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n        \n            iziToast.info({\n                title:'Sorry',\n                message:`We're sorry, but you've reached the end of search results.`\n           });\n          }\n          simpleBox().refresh();\n    } catch (err) {\n      console.log(err);\n    }\n  };"],"names":["baseUrl","fetchImgByQuery","seaechQuery","currentPage","paramsUrl","axios","createGalleryCard","imgInfo","createGalleryTemplate","elem","el","addClass","className","removeClass","simpleBox","SimpleLightbox","totalPages","createLoader","formEl","galleryEl","loadMoreBtn","notFound","loader","page","inputValue","searchSubmit","iziToast","data","onLoadMoreBtnClick","error","event","ulLoader","err"],"mappings":"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"}